<!DOCTYPE html><html><head><title>R: Extract bandwise information from ImageMetaData</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R.css" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/languages/r.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head><body><div class="container">

<table style="width: 100%;"><tr><td>getMeta {RStoolbox}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Extract bandwise information from ImageMetaData</h2>

<h3>Description</h3>

<p>This is an accessor function to quickly access information stored in ImageMetaData, e.g. scale factor per band.
Intended for use with imagery which was imported using stackMeta. Will return parameters using the actual band order in img.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getMeta(img, metaData, what)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;"><td><code>img</code></td>
<td>
<p>SpatRaster or character vector with band names.</p>
</td></tr>
<tr style="vertical-align: top;"><td><code>metaData</code></td>
<td>
<p>ImageMetaData or path to meta data file.</p>
</td></tr>
<tr style="vertical-align: top;"><td><code>what</code></td>
<td>
<p>Character. Parameter to extract. Either data descriptors, or conversion parameters (see Details for options)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Possible metadata parameters (<code>what</code> argument):
</p>
<p>Data descriptors
</p>

<table>
<tr>
 <td style="text-align: left;">
'FILES' </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
'QUANTITY' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
'CATEGORY' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
'NA_VALUE' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
'SATURATE_VALUE' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;"> 
'SCALE_FACTOR' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
'DATA_TYPE' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
'SPATIAL_RESOLUTION' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Conversion parameters
</p>

<table>
<tr>
 <td style="text-align: left;">
'CALRAD' </td><td style="text-align: left;"> Conversion parameters from DN to radiance </td>
</tr>
<tr>
 <td style="text-align: left;">
'CALBT' </td><td style="text-align: left;"> Conversion parameters from radiance to brightness temperature </td>
</tr>
<tr>
 <td style="text-align: left;">
'CALREF' </td><td style="text-align: left;"> Conversion parameters from DN to reflectance (Landsat 8 only) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>If <code>what</code> is one of <code>c('CALRAD', 'CALBT', 'CALREF')</code> a data.frame is returned with bands in rows (order corresponding to <code>img</code> band order). 
Otherwise a named numeric vector with the corresponding parameter is returned (layernames as names).
</p>


<h3>Examples</h3>

<pre><code class="language-r">## Import example data
mtlFile  &lt;- system.file(&quot;external/landsat/LT52240631988227CUB02_MTL.txt&quot;, package=&quot;RStoolbox&quot;)
meta &lt;- readMeta(mtlFile)
lsat_t &lt;- stackMeta(mtlFile)

## Get integer scale factors
getMeta(lsat_t, metaData = meta, what = &quot;SCALE_FACTOR&quot;)
</code></pre>
<pre><code>#&gt; B1_dn B2_dn B3_dn B4_dn B5_dn B6_dn B7_dn 
#&gt;     1     1     1     1     1     1     1
</code></pre>
<pre><code class="language-r">## Conversion factors for brightness temperature
getMeta(&quot;B6_dn&quot;, metaData = meta, what = &quot;CALBT&quot;)
</code></pre>
<pre><code>#&gt;           K1      K2
#&gt; B6_dn 607.76 1260.56
</code></pre>
<pre><code class="language-r">## Conversion factors to top-of-atmosphere radiance
## Band order not corresponding to metaData order
getMeta(lsat_t[[5:1]], metaData = meta, what = &quot;CALRAD&quot;)
</code></pre>
<pre><code>#&gt;         offset  gain
#&gt; B5_dn -0.49035 0.120
#&gt; B4_dn -2.38602 0.876
#&gt; B3_dn -2.21398 1.044
#&gt; B2_dn -4.16220 1.322
#&gt; B1_dn -2.19134 0.671
</code></pre>
<pre><code class="language-r">## Get integer scale factors
getMeta(lsat_t, metaData = meta, what = &quot;SCALE_FACTOR&quot;)
</code></pre>
<pre><code>#&gt; B1_dn B2_dn B3_dn B4_dn B5_dn B6_dn B7_dn 
#&gt;     1     1     1     1     1     1     1
</code></pre>
<pre><code class="language-r">## Get file basenames
getMeta(lsat_t, metaData = meta, what = &quot;FILES&quot;)
</code></pre>
<pre><code>#&gt;                          B1_dn                          B2_dn                          B3_dn 
#&gt; &quot;LT52240631988227CUB02_B1.TIF&quot; &quot;LT52240631988227CUB02_B2.TIF&quot; &quot;LT52240631988227CUB02_B3.TIF&quot; 
#&gt;                          B4_dn                          B5_dn                          B6_dn 
#&gt; &quot;LT52240631988227CUB02_B4.TIF&quot; &quot;LT52240631988227CUB02_B5.TIF&quot; &quot;LT52240631988227CUB02_B6.TIF&quot; 
#&gt;                          B7_dn 
#&gt; &quot;LT52240631988227CUB02_B7.TIF&quot;
</code></pre>


<hr /><div style="text-align: center;">[Package <em>RStoolbox</em> version 0.4.0 <a href="00Index.html">Index</a>]</div>
</div>
</body></html>
