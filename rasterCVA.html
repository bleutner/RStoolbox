<!DOCTYPE html><html><head><title>R: Change Vector Analysis</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R.css" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/languages/r.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head><body><div class="container">

<table style="width: 100%;"><tr><td>rasterCVA {RStoolbox}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Change Vector Analysis</h2>

<h3>Description</h3>

<p>Calculates angle and magnitude of change vectors. 
Dimensionality is limited to two bands per image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rasterCVA(x, y, tmf = NULL, nct = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;"><td><code>x</code></td>
<td>
<p>RasterBrick or RasterStack or SpatRaster with two layers. This will be the reference/origin for the change calculations. Both rasters (y and y) need to correspond to each other, i.e. same resolution, extent and origin.</p>
</td></tr>
<tr style="vertical-align: top;"><td><code>y</code></td>
<td>
<p>RasterBrick or RasterStack or SpatRaster with two layers. Both rasters (y and y) need to correspond to each other, i.e. same resolution, extent and origin.</p>
</td></tr>
<tr style="vertical-align: top;"><td><code>tmf</code></td>
<td>
<p>Numeric. Threshold median factor (optional). Used to calculate a threshold magnitude for which pixels are considered stable, i.e. no change. Calculated as <code>tmf * mean(magnitude[magnitude &gt; 0])</code>.</p>
</td></tr>
<tr style="vertical-align: top;"><td><code>nct</code></td>
<td>
<p>Numeric. No-change threshold (optional). Alternative to <code>tmf</code>. Sets an absolute threshold. Change magnitudes below <code>nct</code> are considered stable and set to NA.</p>
</td></tr>
<tr style="vertical-align: top;"><td><code>...</code></td>
<td>
<p>further arguments passed to writeRaster</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Change Vector Analysis (CVA) is used to identify spectral changes between two identical scenes which were acquired at different times. 
CVA is limited to two bands per image. For each pixel it calculates the change vector in the two-dimensional spectral space. 
For example for a given pixel in image A and B for the red and nir band the change vector is calculated for the coordinate pairs: (red_A | nir_A) and (red_B | nir_B).
</p>
<p>The coordinate system is defined by the order of the input bands: the first band defines the x-axis and the second band the y-axis, respectively.
Angles are returned *in degree* beginning with 0 degrees pointing 'north', i.e. the y-axis, i.e. the second band.
</p>


<h3>Value</h3>

<p>Returns a SpatRaster with two layers: change vector angle and change vector magnitude
</p>


<h3>Examples</h3>

<pre><code class="language-r">library(terra)
pca &lt;- rasterPCA(lsat)$map

## Do change vector analysis
cva &lt;- rasterCVA(pca[[1:2]], pca[[3:4]])
cva
</code></pre>
<pre><code>## class       : SpatRaster 
## dimensions  : 310, 287, 2  (nrow, ncol, nlyr)
## resolution  : 30, 30  (x, y)
## extent      : 619395, 628005, -419505, -410205  (xmin, xmax, ymin, ymax)
## coord. ref. : +proj=utm +zone=22 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
## source(s)   : memory
## names       :        angle,   magnitude 
## min values  : 5.423571e-03,   0.1009387 
## max values  : 3.599993e+02, 106.5000918
</code></pre>


<hr /><div style="text-align: center;">[Package <em>RStoolbox</em> version 0.4.0 <a href="00Index.html">Index</a>]</div>
</div>
</body></html>
